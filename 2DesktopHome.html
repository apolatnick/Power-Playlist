<!--//Sara Cassella made this -->
<!--Home screen for Host on Desktop View -->

<DOCTYPE html>
<title>
</title>
<head>
	<meta charset="utf-8">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="js/requestSong.js"></script>
	<script src="jq/jquery-sortable-master/source/js/jquery-sortable.js"></script>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<!--script for the autocomplete search bar -->
<!--	<script>
	$( function() {
		var availableSongs = [
			"Hello",
			"Don't Gotta Work It Out",
			"The Good Life",
			"It's A Man's World",
			"Smooth"
		];
		$( "#tags" ).autocomplete({
			source: availableSongs
		});
	} );
</script>-->
<!--Script for adjusting CSS for Screen Viewing Size-->
<script>
$(window).on('resize', function() {
    if($(window).width() < 480) {
        $('#playlistColumn').addClass('playPhone');
        $('#playlistColumn').removeClass('playDesk');
				$('#suggestedSongColumn').addClass('suggPhone');
				$('#suggestedSongColumn').removeClass('suggDesk');
				$('#upNext').addClass('upNextTitle');
				$('#find').addClass('smallSearch');
				$('#find').removeClass('search');
				$('#labelForSearch').removeClass('labelDesk');
				$('#labelForSearch').addClass('labelPhone');
				$('#searchbar').removeClass('searchBarDesk');
				$('#searchbar').addClass('searchBarPhone');
				$('#title').removeClass('deskTitle');
				$('#title').addClass('phoneTitle');
				$('#welcome').removeClass('deskWelcome');
				$('#welcome').addClass('phoneWelcome');
				$('#invite').removeClass('deskInvite');
				$('#invite').addClass('phoneInvite');
				$('#pinNum').removeClass('deskPinNum');
				$('#pinNum').addClass('phonePinNum');
    }else{
        $('#playlistColumn').addClass('playDesk');
        $('#playlistColumn').removeClass('playPhone');
				$('#suggestedSongColumn').addClass('suggDesk');
				$('#suggestedSongColumn').removeClass('suggPhone');
				$('#upNext').removeClass('upNextTitle');
				$('#find').removeClass('smallSearch');
				$('#find').addClass('search');
				$('#labelForSearch').addClass('labelDesk');
				$('#labelForSearch').removeClass('labelPhone');
				$('#searchbar').addClass('searchBarDesk');
				$('#searchbar').removeClass('searchBarPhone');
				$('#title').addClass('deskTitle');
				$('#title').removeClass('phoneTitle');
				$('#welcome').addClass('deskWelcome');
				$('#welcome').removeClass('phoneWelcome');
				$('#invite').addClass('deskInvite');
				$('#invite').removeClass('phoneInvite');
				$('#pinNum').addClass('deskPinNum');
				$('#pinNum').removeClass('phonePinNum');
    }
})
</script>
<!--script for the striping of the list and the drag and drop -->
	<script>
	$(function  () {
	  $("ol.example").sortable();
	});
	</script>
	<script>
	function addSong() {
		$("#empty").remove();
		$("#emptyalso").remove();
		var example = document.querySelector(".example");
		example.appendChild(document.createElement('li')).textContent='new Song';
		// $(".example:even").css("background-color", "#333333");
		$(".evenSong:even").css("background-color", "#333333");
	}
	</script>
	<script>
		function upVotePlaylist(event) {
			var x = event.target;
			var y = x.parentNode;
			var z = y.childNodes[0];
			var title = z.textContent;
			x.onclick="";
			x.src = "images/clickedUpVote.png";
			var id = y.id;
			// alert(title);
			upVote(id, 1);
			//get upvote image - .attr('src', 'images/clickedUpVote.png');
			//need to get the name of song and 1 for playlist 2 for suggested list
			//call AP's function upVoteSong()
		}
	</script>
	<script>
		function downVotePlaylist(event) {
			var x = event.target;
			var y = x.parentNode;
			var z = y.childNodes[0];
			var title = z.textContent;
			x.onclick="";
			x.src = "images/clickedDownVote.png";
			var id = y.id;
			// alert(title);
			downVote(id, 1);
			//if i remove the onclick after aps function is called..... but only would work the one time.
			//call AP's function downVote();
			//get downvote image - .attr('src', 'images/clickedDownVote.png');
			//need to get the name of song and 1 for playlist
		}
	</script>
	<script>
		function upVoteSuggList(event) {
			var x = event.target;
			var y = x.parentNode;
			var z = y.childNodes[2];
			var title = z.textContent;
			x.onclick="";
			x.src = "images/clickedUpVote.png";
			var id = y.id;
			// alert(title);
			upVote(id, 2);
			//get upvote image - .attr('src', 'images/clickedUpVote.png');
			//need to get the name of song and 1 for playlist 2 for suggested list
			//call AP's function upVoteSong()
		}
	</script>
	<script>
		function downVoteSuggList(event) {
			var x = event.target;
			var y = x.parentNode;
			var z = y.childNodes[2];
			var title = z.textContent;
			x.onclick="";
			x.src = "images/clickedDownVote.png";
			var id = y.id;
			// alert(title);
			downVote(id, 2);
			//if i remove the onclick after aps function is called..... but only would work the one time.
			//call AP's function downVote();
			//get downvote image - .attr('src', 'images/clickedDownVote.png');
			//need to get the name of song and 2 for suggested list
		}
	</script>
	<script>
		function removeSong(event) {
			var x = event.target;
			var y = x.parentNode;
			var z = y.childNodes[0];
			var title = z.textContent;
			var id = y.id;
			// alert(title);
			deleteSong(id, 1);
			//need to get the name of song and 1 for playlist
			//call AP's function deleteSong()
		}
	</script>
	<script>
		function appSong(event) {
			var x = event.target;
			var y = x.parentNode;
			var z = y.childNodes[2];
			var title = z.textContent;
			var id = y.id;
			// alert(title);
			approveSong(id);
			//call AP's function approveSong()
			//need to get the name of the song to pass into AP's function
		}
	</script>
	<script>
		function rejectSong(event) {
			var x = event.target;
			var y = x.parentNode;
			var z = y.childNodes[2]; // gets you the song name
			// alert(z.textContent);
			var title = z.textContent;
			var id = y.id;
			// alert(title);
			deleteSong(id, 2);
			//call AP's function deleteSong()
			//need to get the name of song and 2 for suggested list
		}
	</script>

	<link rel="stylesheet" type="text/css" href="css/DesktopHome.css"></link>
</head>


<body onload="onLoad()">
	<div id="header">
		<img src="images/thickHand.png" id="logo"></img>
	 <h1 id="title" class="deskTitle">PowerPlaylist<div id="welcome" class="deskWelcome">Welcome Admin</div><div id="invite" class="deskInvite">Invite others with this PIN number: <div id="pinNum" class="deskPinNum">1234</div></div></h1>
 </div>
<div id="searchbar" class="searchBarDesk">
	<label for="find"  id="labelForSearch" class="labelDesk">Search</label>
	<!-- <input id="tags" class="search" type="text" name="search" placeholder="Search for a song.."> -->
		<input id="find" class="search" type="text" name="search" placeholder="Search for a song..">
</div>
<div id="dropdown">
</div>
<div id="container" style="position: absolute; width: 100%; top: 170px;">
<div id="playlistColumn" class="playDesk">
	<h2 id="upNext">Up Next</h2>
	<p id="empty" style="text-align: center;">Your playlist is currently empty.</p>
		<div id="songList">
			<ol class='example' id="playlist">
			</ol>
		</div>
</div>
<div id="suggestedSongColumn" class="suggDesk" display="inline-block" style="overflow: auto;">
	<h2 style="color: white; margin-top: none; display: block; font-size: 1.5em; text-align: left; margin-bottom: 0;">Suggested by Guests</h2>
	<p style="color: grey; margin-top: 6px; font-size: 1em;">Waiting for host's approval</p>
	<hr style="background-color: grey;"/>
	<p id="emptyalso" style="color: white; text-align: center;">No songs suggested by guests.</p>
	<div id="songList2" style="width: 100%; margin-top: 0px; position: relative;">
		<ol class="suggestedExample">
		</ol>
	</div>
</div>
</div>
</body>

<!-- <audio id="player" ontimeupdate="document.getElementById('time').innerHTML = Math.floor(this.currentTime) + ' / ' + Math.floor(this.duration) + ' seconds'; "></audio> -->
<audio id="player" ontimeupdate="updatePlayBar()"></audio>

<div id="playbar" class="hostPlaybar" style="text-align: center;">

<p style="display: inline-block; float: left; margin-left: 4%; margin-right: 3%; color: lightgrey; width: 10%; font-size: 1.2em; margin-top: 0; padding-top: 10px;"> Now Playing...</p>

<div id="songData" style="display: inline-block; float: left; width: 20%; height: 100%; margin-right: 0; margin-left: 0;">
<p id="name" style="display: inline-block; font-weight: bold; padding-right: 7px; font-size: .8em; margin-top: 0; padding-top: 10px;">Nothing Currently Playing</p><p id="playingArtist" style="display: inline-block; font-weight: lighter; font-size: .8em; margin-top: 0; padding-top: 10px;"></p>
</div>

<div id="playerAndTime" style="display: inline-block; width: 40%; height: 100%; text-align: center; margin-right: 0; margin-left: 0;">
<p id="currentSeconds" style="display: inline-block; color: grey; font-size: .5em; float: left; margin-bottom: 1px;">0:00</p><p id="totalTime" style="font-size:.5em; color: grey; float: right; margin-bottom: 1px;;">0:00</p>
<div id="playBar" style="display: inline-block; width: 100%; height: 8px; background-color: #3e26c6;"><div id="range" style="height: 8px; width: 0%; background-color: white;"></div></div>
</div>

<div id="buttons" style="display: inline-block; width: 15%; height: 100%; float: right; text-align: center; margin-right: 5%; padding-top: 5px;">
<!-- <button class="playbutton" id="next" style="float: left; display: inline-block;">Next Song</button> -->
<img src="images/nextSongButton.png" class="playbutton" id="next" style="display: inline-block; float: right; width: 25px; padding-left: 5px; padding-right: 5px; margin: auto;">
<!-- <button class="playbutton" id="stop" style="float: left; display: inline-block;">Stop</button> -->
<img src="images/pauseButton.png" class="playbutton" id="stop" style="display: inline-block; float: right; width: 25px; padding-left: 5px; padding-right: 5px; margin: auto;">
<!-- <button class="playbutton" id="playSong" style="float: left; display: inline-block;">Play</button> -->
<img src="images/playButton.png" class="playbutton" id="playSong" style="display: inline-block; float: right; width: 25px; padding-left: 5px; padding-right: 5px; margin: auto;">
<!-- <button class="playbutton" id="previous" style="float: left; display: inline-block;">Previous Song</button> -->
<img src="images/previousSongButton.png" class="playbutton" id="previous" style="display: inline-block; float: right; width: 25px; padding-left: 5px; padding-right: 5px; margin: auto;">
<!-- <p id="time" style="color: white; font-size: 1em; display: inline-block;">Current Time in song is: </p> -->
</div>
</div>
</div>

<script>
function updatePlayBar() {
	// document.getElementById('time').innerHTML = Math.floor(player.currentTime) + ' / ' + Math.floor(player.duration) + ' seconds';
	// var song = _playlist.querySelector("li.selected");
	// var name = song.childNodes[0];
	// document.getElementById("name").innerHTML = name.textContent;
	// var artist = song.childNodes[6];
	// document.getElementById("playingArtist").innerHTML = artist.textContent;
	var num = Math.floor(player.currentTime);
	var minutes = Math.floor(num/60);
	var seconds = num - (minutes * 60);
	if(seconds < 10) {
		document.getElementById("currentSeconds").innerHTML = minutes + ':0' + seconds;
	}
	else {
		document.getElementById("currentSeconds").innerHTML = minutes + ':' + seconds;
	}
	var denom = Math.floor(player.duration);
	var durMin = Math.floor(denom/60);
	var durSec = denom - (durMin * 60);
	if(durSec < 10) {
		document.getElementById("totalTime").innerHTML = durMin + ':0' + durSec;
	}
	else {
		document.getElementById("totalTime").innerHTML = durMin + ':' + durSec;
	}
	var percent = num / denom;
	percent = percent * 100;
	document.getElementById("range").style.width = percent + "%";
}
</script>

<script type="text/javascript">
// globals
var _player = document.getElementById("player"),
	_playlist = document.getElementById("playlist"),
	_stop = document.getElementById("stop");
	_nextSong = document.getElementById("next");
	_previous = document.getElementById("previous");
	_play = document.getElementById("playSong");

// functions
function playlistItemClick(clickedElement) {
	var selected = _playlist.querySelector(".selected");
	if (selected) {
			selected.classList.remove("selected");
	}
	clickedElement.classList.add("selected");
	_player.src = clickedElement.getAttribute("data-ogg");
	_player.play();
	if (selected) {
		var name = selected.childNodes[0];
		document.getElementById("name").innerHTML = name.textContent;
		var artist = selected.childNodes[6];
		document.getElementById("playingArtist").innerHTML = artist.textContent;
	}
}

function playNext() {
	var selected = _playlist.querySelector("li.selected");
	if (selected && selected.nextElementSibling) {
			playlistItemClick(selected.nextElementSibling);
	}
}

function playPrevious() {
	var selected = _playlist.querySelector("li.selected");
	if (selected && selected.previousElementSibling) {
		playlistItemClick(selected.previousElementSibling);
	}
}
// event listeners
_stop.addEventListener("click", function () {
	_player.pause();
});

_play.addEventListener("click", function () {
	_player.play();
});

_nextSong.addEventListener("click", playNext);

_previous.addEventListener("click", playPrevious);

$("#next").click(playNext());

$("#previous").click(playPrevious());

_player.addEventListener("ended", playNext);

_playlist.addEventListener("click", function (e) {
	if (e.target && e.target.nodeName === "LI") {
			playlistItemClick(e.target);
	}
});

// $().click(fuction)

$("#player").bind("timeupdate", function() {
    var currentTime = $("#player").currentTime;
    var duration = $("#player").duration;
		$("#time").innerHtml += currentTime;
    $('.hp_range').stop(true,true).animate({'width':(currentTime +.25)/duration*100+'%'},250,'linear');
});
</script>





<div id="navigation">
	<ul>
	  <!-- <li class="navlink borderLeft"><img src="images/HomeIconWhite-02.png" style="width: 40px; padding-top: 10px;"><a href="2DesktopHome.html" class="active" style="padding-top: 14px;">Home</a></li> -->
	  <li class="navlink borderLeft"><img src="images/MusicProvidersGrey-02.png" style="width: 60px; padding-top: 10px;"><a href="MusicProviders.html" style="padding-top: 14px;">Music Providers</a></li>
	  <!-- <li class="navlink borderLeft"><img src="images/PlaylistsIconGrey-02.png" style="width: 40px; padding-top: 10px;"><a href="" style="padding-top: 14px;">Playlists</a></li> -->
		<li class="navlink borderLeft"><img src="images/ShareIconGrey-02.png" style="width: 40px; padding-top: 8px;"><a href="" style="padding-top: 11px;">Share Pin</a></li>
	  <li class="navlink" onclick="endParty()"><img src="images/SettingsIconGrey-02.png" style="width: 40px; padding-top: 10px;"><a href="" style="padding-top: 11px;">End Party</a></li>
	</ul>
</div>
<!-- <div id="footer">
 <p id="copyright" class="copyrightDesk">Copyright 2017 Sara Cassella / Alexander Polatnick / Kristen Ronhovde</p>
</div> -->
</html>
